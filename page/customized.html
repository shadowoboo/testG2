<!DOCTYPE html>
<html lang="zh_tw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Customixed Testing</title>
    <!-- <link rel="stylesheet" href="../css/boxModel.css"> -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="../js/jquery-3.3.1.min.js"></script>

</head>
<body>
<header style="width: 100%; height: 15vh;background: #fff;"">
    
</header>
<section class="customized">
    <div class="makingStep">
        <div class="cloud step1">
            <svg version="1.1" id="&#x5716;&#x5C64;_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
            y="0px" viewBox="0 0 247.606 146.689" style="enable-background:new 0 0 247.606 146.689;" xml:space="preserve">
       <g>
           <path style="fill:#aedcd3;" d="M213.438,35.033c-6.607-1.015-13.08-0.353-19.002,1.651c-2.464-17.085-15.807-31.292-33.753-34.051
               c-10.341-1.589-20.366,0.907-28.438,6.283c-4.395-4.428-10.194-7.541-16.834-8.561C103.535-1.47,92.214,3.888,85.86,13.188
               c-0.915-0.197-1.839-0.375-2.776-0.52c-23.488-3.61-45.573,10.846-52.161,33.001c-13.82,0.737-25.703,11.06-27.889,25.28
               c-2.505,16.298,8.677,31.54,24.974,34.045c1.258,0.193,2.509,0.296,3.749,0.33c-0.109,0.521-0.206,1.048-0.287,1.58
               c-2.505,16.297,8.677,31.54,24.974,34.045c12.224,1.879,23.855-3.943,29.962-13.848c5.951,9.922,16.107,17.22,28.435,19.115
               c11.761,1.808,23.113-1.671,31.647-8.66c2.176,0.733,4.439,1.301,6.786,1.662c19.105,2.936,37.128-8.071,43.745-25.43
               c1.363,0.359,2.756,0.653,4.18,0.871c21.988,3.38,42.553-11.706,45.933-33.695C250.512,58.977,235.426,38.413,213.438,35.033z"/>
       </g>
       </svg>
       
            <p>設計箱子</p>
        </div>    
         <div class="cloud step2">
            <svg version="1.1" id="&#x5716;&#x5C64;_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
            y="0px" viewBox="0 0 247.606 146.689" style="enable-background:new 0 0 247.606 146.689;" xml:space="preserve">
       <g>
           <path style="fill:#FFFFFF;" d="M213.438,35.033c-6.607-1.015-13.08-0.353-19.002,1.651c-2.464-17.085-15.807-31.292-33.753-34.051
               c-10.341-1.589-20.366,0.907-28.438,6.283c-4.395-4.428-10.194-7.541-16.834-8.561C103.535-1.47,92.214,3.888,85.86,13.188
               c-0.915-0.197-1.839-0.375-2.776-0.52c-23.488-3.61-45.573,10.846-52.161,33.001c-13.82,0.737-25.703,11.06-27.889,25.28
               c-2.505,16.298,8.677,31.54,24.974,34.045c1.258,0.193,2.509,0.296,3.749,0.33c-0.109,0.521-0.206,1.048-0.287,1.58
               c-2.505,16.297,8.677,31.54,24.974,34.045c12.224,1.879,23.855-3.943,29.962-13.848c5.951,9.922,16.107,17.22,28.435,19.115
               c11.761,1.808,23.113-1.671,31.647-8.66c2.176,0.733,4.439,1.301,6.786,1.662c19.105,2.936,37.128-8.071,43.745-25.43
               c1.363,0.359,2.756,0.653,4.18,0.871c21.988,3.38,42.553-11.706,45.933-33.695C250.512,58.977,235.426,38.413,213.438,35.033z"/>
       </g>
       </svg>
       
            <p>設計卡片</p>
        </div>    
         <div class="cloud step3">
            <svg version="1.1" id="&#x5716;&#x5C64;_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
            y="0px" viewBox="0 0 247.606 146.689" style="enable-background:new 0 0 247.606 146.689;" xml:space="preserve">
       <g>
           <path style="fill:#FFFFFF;" d="M213.438,35.033c-6.607-1.015-13.08-0.353-19.002,1.651c-2.464-17.085-15.807-31.292-33.753-34.051
               c-10.341-1.589-20.366,0.907-28.438,6.283c-4.395-4.428-10.194-7.541-16.834-8.561C103.535-1.47,92.214,3.888,85.86,13.188
               c-0.915-0.197-1.839-0.375-2.776-0.52c-23.488-3.61-45.573,10.846-52.161,33.001c-13.82,0.737-25.703,11.06-27.889,25.28
               c-2.505,16.298,8.677,31.54,24.974,34.045c1.258,0.193,2.509,0.296,3.749,0.33c-0.109,0.521-0.206,1.048-0.287,1.58
               c-2.505,16.297,8.677,31.54,24.974,34.045c12.224,1.879,23.855-3.943,29.962-13.848c5.951,9.922,16.107,17.22,28.435,19.115
               c11.761,1.808,23.113-1.671,31.647-8.66c2.176,0.733,4.439,1.301,6.786,1.662c19.105,2.936,37.128-8.071,43.745-25.43
               c1.363,0.359,2.756,0.653,4.18,0.871c21.988,3.38,42.553-11.706,45.933-33.695C250.512,58.977,235.426,38.413,213.438,35.033z"/>
       </g>
       </svg>
       
            <p>選購零食</p>            
        </div>    
         <div class="cloud step4">
            <svg version="1.1" id="&#x5716;&#x5C64;_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
            y="0px" viewBox="0 0 247.606 146.689" style="enable-background:new 0 0 247.606 146.689;" xml:space="preserve">
       <g>
           <path style="fill:#FFFFFF;" d="M213.438,35.033c-6.607-1.015-13.08-0.353-19.002,1.651c-2.464-17.085-15.807-31.292-33.753-34.051
               c-10.341-1.589-20.366,0.907-28.438,6.283c-4.395-4.428-10.194-7.541-16.834-8.561C103.535-1.47,92.214,3.888,85.86,13.188
               c-0.915-0.197-1.839-0.375-2.776-0.52c-23.488-3.61-45.573,10.846-52.161,33.001c-13.82,0.737-25.703,11.06-27.889,25.28
               c-2.505,16.298,8.677,31.54,24.974,34.045c1.258,0.193,2.509,0.296,3.749,0.33c-0.109,0.521-0.206,1.048-0.287,1.58
               c-2.505,16.297,8.677,31.54,24.974,34.045c12.224,1.879,23.855-3.943,29.962-13.848c5.951,9.922,16.107,17.22,28.435,19.115
               c11.761,1.808,23.113-1.671,31.647-8.66c2.176,0.733,4.439,1.301,6.786,1.662c19.105,2.936,37.128-8.071,43.745-25.43
               c1.363,0.359,2.756,0.653,4.18,0.871c21.988,3.38,42.553-11.706,45.933-33.695C250.512,58.977,235.426,38.413,213.438,35.033z"/>
       </g>
       </svg>
       
            <p>客製完成</p>   
        </div>
    </div>
    <div class="priceSign">$150</div>
    <div class="snackHouse">
        <div class="roof">
            <svg version="1.1" id="&#x5716;&#x5C64;_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
            y="0px" viewBox="0 0 1164 201.655" style="enable-background:new 0 0 1164 201.655;" xml:space="preserve">
       <g>
           <g>
               <g>
                   <path style="fill:#E85387;" d="M737.566,169.651c0,14.566,23.358,26.485,52.395,26.485c29.036,0,54.556-11.918,54.556-26.485
                       V88.104H737.566V169.651z"/>
                   <path style="fill:#FFFFFF;" d="M632.775,88.104v81.547c0,1.067,0.313,2.117,0.066,3.152c3.11,13.095,25.454,23.333,52.169,23.333
                       c28.823,0,52.556-11.918,52.556-26.485V88.104H632.775z"/>
                   <path style="fill:#E85387;" d="M632.775,88.104H527.984v81.547c0,1.066,0.303,2.117,0.057,3.151
                       c3.133,13.095,25.716,23.334,52.626,23.334c26.911,0,49.318-10.238,52.452-23.333c-0.247-1.035-0.344-2.085-0.344-3.152V88.104z"
                       />
                   <path style="fill:#EA5D84;" d="M632.775,88.104L632.775,88.104v81.547c0,1.067-0.246,2.117-0.002,3.152
                       c0.248-1.035,0.002-2.085,0.002-3.152V88.104z"/>
                   <path style="fill:#FFFFFF;" d="M527.984,88.104h-102.63v81.547c0,14.566,22.936,26.485,51.76,26.485
                       c26.713,0,48.532-10.239,51.638-23.334c-0.247-1.034-0.768-2.085-0.768-3.151V88.104z"/>
                   <path style="fill:#FFFFFF;" d="M527.984,88.304L527.984,88.304v81.348c0,1.066-0.247,2.117,0.001,3.151
                       c0.247-1.034-0.001-2.085-0.001-3.151V88.304z"/>
                   <path style="fill:#E85387;" d="M319.483,88.104v81.547c0,1.066-0.258,2.117-0.503,3.151
                       c3.132,13.095,26.081,23.334,52.992,23.334c29.036,0,53.382-11.918,53.382-26.485V88.104H319.483z"/>
                   <path style="fill:#FFFFFF;" d="M319.483,88.104H214.692v81.547c0,14.566,23.454,26.485,52.278,26.485
                       c26.713,0,49.351-10.239,52.461-23.334c-0.247-1.034,0.052-2.085,0.052-3.151V88.104z"/>
                   <path style="fill:#FFFFFF;" d="M319.483,88.104L319.483,88.104v81.547c0,1.066-0.245,2.117,0.002,3.151
                       c0.246-1.034-0.002-2.085-0.002-3.151V88.104z"/>
                   <path style="fill:#E85387;" d="M108.821,88.104v81.547c0,14.566,23.899,26.485,52.933,26.485
                       c29.04,0,52.938-11.918,52.938-26.485V88.104H108.821z"/>
                   <path style="fill:#FFFFFF;" d="M2.949,88.104v81.547c0,14.566,24.652,26.485,53.476,26.485s52.395-11.918,52.395-26.485V88.104
                       H2.949z"/>
                   <path style="fill:#FFFFFF;" d="M1053.019,88.104v81.547c0,14.566,24.653,26.485,53.478,26.485
                       c28.82,0,54.554-11.918,54.554-26.485V88.104H1053.019z"/>
                   <path style="fill:#E85387;" d="M949.308,88.104v81.547c0,14.566,22.82,26.485,51.855,26.485
                       c29.036,0,51.855-11.918,51.855-26.485V88.104H949.308z"/>
                   <path style="fill:#FFFFFF;" d="M844.517,88.104v81.547c0,14.566,23.572,26.485,52.395,26.485
                       c28.821,0,52.395-11.918,52.395-26.485V88.104H844.517z"/>
               </g>
               <g>
                   <polygon style="fill:#FFFFFF;" points="1161.051,88.104 2.949,88.104 102.339,6 1061.661,6 			"/>
                   <polygon style="fill:#E85387;" points="1001.164,6 897.453,6 949.308,88.104 1053.019,88.104 			"/>
                   <polygon style="fill:#E85387;" points="161.756,6 265.467,6 214.692,88.104 108.821,88.104 			"/>
                   <polygon style="fill:#E85387;" points="356.213,6 459.924,6 425.354,88.104 319.483,88.104 			"/>
                   <polygon style="fill:#E85387;" points="806.706,6 702.996,6 737.566,88.104 844.517,88.104 			"/>
                   <polygon style="fill:#E85387;" points="632.775,88.104 527.984,88.104 529.064,6 632.775,6 			"/>
               </g>
               <polygon style="opacity:0.2;fill:#FFFFFF;" points="1061.661,6 1001.164,6 897.453,6 806.706,6 702.996,6 632.775,6 529.064,6 
                   459.924,6 356.213,6 265.467,6 161.756,6 102.339,6 2.949,88.104 108.821,88.104 214.692,88.104 319.483,88.104 425.354,88.104 
                   527.984,88.104 632.775,88.104 737.566,88.104 844.517,88.104 949.308,88.104 1053.019,88.104 1161.051,88.104 		"/>
           </g>
       </g>
       </svg>
        </div>

        <div class="section section_15" id="section_15">
            <div class="leftBox">
                <div id="ctrl_bar">
                    <div class="btn btn_front dimension" id="btn_front">前</div>
                    <div class="btn btn_back dimension" id="btn_back">後</div>
                    <div class="btn btn_top dimension" id="btn_top">上</div>
                    <div class="btn btn_left dimension" id="btn_left">左</div>
                    <div class="btn btn_right dimension" id="btn_right">右</div>
                    <!-- <div class="btn rotateX" id="rotateX">轉</div> -->
                      <!-- <div class="btn rotateY" id="rotateY">Y軸轉轉</div>-->
                    <div class="btn rotateZ dimension" id="rotateZ">轉</div> 
                </div>
                <div class="showBox">
                        <div class="camera">
                            <div class="box boxBase" id="box_15">
                                <div class="surface surface_top" id="cover_out_15">
                                    <img src="ip2.png" id="a1" alt="">
                                </div>
                                <div class="surface surface_top_inner" id="cover_in_15">
                            
                                </div>
                                <div class="surface surface_down"></div>
                                <div class="surface surface_back"></div>
                                <div class="surface surface_font"></div>
                                <div class="surface surface_left"></div>
                                <div class="surface surface_right"></div>
                            </div>
                        </div>
                
                        <div id="btns15">
                            <div class="btn" id="btn_big"><img src="../images/customized/zoom_in.svg" alt=""></div>
                            <div class="btn" id="btn_small"><img src="../images/customized/zoom_out.svg" alt=""></div>
                            <div class="btn" id="btn_clk"><img src="../images/customized/rotate.svg" alt=""></div>
                            <div class="btn" id="btn_del"><i class="fa fa-trash"></i></div>
                        </div>                        
                        <div class="btn show action" id="show" style="line-height: 35px;margin:3px auto;">3D展示</div>
                </div>
            </div>
                
            <div class="form">
      
                    <ul class="tab-group">
                      <li class="tab active"><a href="#signup">顏色</a></li>
                      <li class="tab"><a href="#login">圖片</a></li>
                    </ul>
                    
                    <div class="tab-content">
                      <div id="signup">   
                        
                        
                        <div class="top-row">
                            <div class="pickColor">
                                <div class="colorBtn color1"></div>
                                <div class="colorBtn color2"></div>
                                <div class="colorBtn color3"></div>
                                <div class="colorBtn color4"></div>
                                <div class="colorBtn color5"></div>
                            </div>
      
   
                        </div>

                        
                        </form>
              
                      </div>
                      
                      <div id="login">   
                            <div class="pics">
                                    <div class="pic">
                                        <img src="../images/customized/chips.svg" alt="">
                                    </div>
                                    <div class="pic">
                                        <img src="../images/customized/cookies.svg" alt="">
                                    </div>
                                    <div class="pic">
                                        <img src="../images/customized/chocolate.svg" alt="">
                                    </div>
                                    <div class="pic">
                                        <img src="../images/customized/lollip.svg" alt="">
                                    </div>                                    
                                    <div class="pic">
                                        <img src="../images/customized/candy.svg" alt="">
                                    </div>                                    
                                    <div class="pic">
                                        <img src="../images/customized/machi.svg" alt="">
                                    </div>

                                </div>
                     
                        
                        </form>
              
                      </div>
                      
                    </div><!-- tab-content -->
                    
              </div> <!-- /form -->
            </div>
    </div>    
</section>
<div class="stepRegion">
    <button class="step">下一步</button> 
</div>
<script>
    const boxBases = document.querySelectorAll(".boxBase");
    const btns = document.querySelectorAll(".btn");
    //拖曳測試
    const pics = document.querySelectorAll("pics");
    const pic_img = document.querySelectorAll(".pic img");
    const surface = document.querySelectorAll(".surface");
    var arrDropedImg = [];
    // //動態生成的元素會抓不到
    // // const droped_img = document.querySelectorAll(".droped_img");
    // const droped_img = document.querySelectorAll(".surface img");
    ///允許 drop 的按鈕
    const btnDropOn = ["btn_front",
        "btn_back",
        "btn_top",
        "btn_bottom",
        "btn_left",
        "btn_right",
        "btn_big",
        "btn_small",
        "btn_clk",
        "btn_unclk",
        "btn_del"];
    //工作姿態陣列 posture
    // 此陣列姿態，開啟 surface 的 drop 監聽，其餘時候不給降落
    const posture = ["rotateX(0deg) rotateY(0deg) rotateZ(0deg)",//前
        "rotateX(0deg) rotateY(180deg) rotateZ(0deg)",//後
        "rotateX(-90deg) rotateY(0deg) rotateZ(0deg)",//上
        "rotateX(90deg) rotateY(0deg) rotateZ(0deg)",//下
        "rotateX(0deg) rotateY(90deg) rotateZ(0deg)",//左
        "rotateX(0deg) rotateY(-90deg) rotateZ(0deg)"]//右
    //允許控制圖片的按鈕
    const dropedImgCtrl = ["btn_big", "btn_small", "btn_clk", "btn_unclk", "btn_del"];


    //給箱子姿態初始值
    boxBases.forEach(el => {
        el.style.transform = "rotateX(-30deg) rotateY(30deg) rotateZ(0deg)";
    })

    //按鈕監聽事件
    btns.forEach(elem => {
        elem.addEventListener("click", boxRotate);
        elem.addEventListener("click", dropedCtrl);
        elem.addEventListener("click", surfaceDropSwitch);//判斷要不要開drop區監聽
    })
    



    //拖曳功能監聽事件
    /// 對應按鈕觸發時要添加監聽事件，其餘移除監聽
    function surfaceDropSwitch(e) {
        // console.log(`btn id is: ${this.id}`);
        if (btnDropOn.indexOf(this.id) == -1) { //如果不是工作面的按鈕
            surface.forEach(el => {
                console.log(`el: ${el}`);
                el.removeEventListener("drop", dropped);//移除drop監聽
            })
        } else {
            surface.forEach(el => {
                el.addEventListener("drop", dropped);
            })
        }
    }

    /// 盒子不在指定姿態時要移除監聽
    boxBases.forEach(elem => {
        let pos = elem.style.transform;
        console.log(`pos: ${pos}`);
        console.log(`posture.indexOf(pos): ${posture.indexOf(pos)}`);
        if (posture.indexOf(pos) == -1) {
            surface.forEach(el => {
                console.log(`el: ${el}`);
                el.removeEventListener("drop", dropped);
            })
        } else {
            surface.forEach(el => {
                el.addEventListener("drop", dropped);
            })
        }
    })
    //可放置區(就是箱子表面)的監聽事件
    surface.forEach(elem => {
        //允許拖到表面(開放領空~)
        elem.addEventListener("dragover", function drageOver(e) {
            e.preventDefault();
            //出現提示效果，透明度改變
            e.target.style.opacity = "0.8";
            //drop區內被碰到的圖片開啟穿透的狀態，才能重疊上去
            //新增加的元素可以直接被事件觸發，透過for迴圈去抓元素的方式不行
            if (e.target.classList.contains("droped_img") == true) {
                e.target.style.pointerEvents = "none";
            }
        });
        //允許丟到表面上(允許降落~)
        // elem.addEventListener("drop", dropped);
        //沒被觸發的drop區恢復正常透明度
        elem.addEventListener("dragleave", function dragLeave(e) {
            e.target.style.opacity = "1";
        })
    })

    //箱子表面監聽
    //動態新增的東西需要先監聽父層，子層新增的元素開監聽才有效
    surface.forEach(elem => {
        elem.addEventListener("mouseenter", function wakeup() {
            console.log("mouseEnter");

            //"箱子表面的圖片"的監聽事件
            arrDropedImg.forEach(elem => {
                elem.addEventListener("dragstart", function dragStart_2(e) {
                    console.log("這裡的圖片動起來!");
                    e.dataTransfer.setData("text", "onSurface");
                    e.dataTransfer.setData("offsetx", e.offsetX);
                    e.dataTransfer.setData("offsety", e.offsetY);
                    srcItem = this;
                    console.log(`THIS ${this.nodeName}`);

                    // e.dataTransfer.setData("srcItem", this);
                })
                elem.addEventListener("dragend", function dragEnd_2(e) {
                    surface.forEach(elem => {
                        elem.style.opacity = "1";
                    })
                    //操作預先存起來的新元素陣列
                    arrDropedImg.forEach(elem => {
                        elem.style.pointerEvents = "auto";
                    })
                })
                elem.addEventListener("click", function selectDropedImg(e) {
                    arrDropedImg.forEach(el => {
                        el.classList.remove("select");
                    })
                    e.target.classList.add("select");
                })
            })
        })
    })

    //給"遠方的客人"可拖曳物件初始狀態
    pic_img.forEach(elem => {
        elem.addEventListener("dragstart", function dragStart(e) {
            // e.preventDefault();
            console.log(`e.target.src: ${e.target.src}`);
            //設定要傳送到drop方的訊息
            e.dataTransfer.setData("image/jpeg", e.target.src);
            e.dataTransfer.setData("offsetx", e.offsetX);//拖曳開始時，滑鼠在圖片內的相對位置
            e.dataTransfer.setData("offsety", e.offsetY);//拖曳開始時，滑鼠在圖片內的相對位置
        })
        elem.addEventListener("dragend", function dragEnd(e) {
            surface.forEach(elem => {
                elem.style.opacity = "1";
            })

            //操作預先存起來的新元素陣列
            arrDropedImg.forEach(elem => {
                elem.style.pointerEvents = "auto";
            })
        })
    })
    //從圖片區降落到箱子區的drop事件
    //要分成 "遠方來的客人" 和 "在地旅行的人"
    //"遠方的客人"只要新生成一個child在這片土地
    //"在地旅行的人"只要移動它的位置
    var drop_count = 1;
    console.log(`drop_count: ${drop_count}`);
    function dropped(e) {
        e.preventDefault();
        drop_count = drop_count + 1;//每次觸發drop就增加一次，讓新觸發物件的z-index更高
        // console.log(`drop_count: ${drop_count}`);
        //如果是有在地人的 class name 就會有 droped_img，那就給移動方法
        if (e.dataTransfer.getData('text') == "onSurface") {
            console.log(`droped_img`);
            //接收來自dragstart的座標訊息
            let mouseOffset = { x: 0, y: 0 };
            mouseOffset.x = e.dataTransfer.getData("offsetx");
            mouseOffset.y = e.dataTransfer.getData("offsety");
            //因為使用穿透屬性，所以座標定位不用迴避圖片了
            mouseNow = { x: 0, y: 0 };
            mouseNow.x = e.offsetX;
            mouseNow.y = e.offsetY;
            //接收來自setData的資料，設定新座標
            // let srcItem= e.dataTransfer.getData("srcItem")
            srcItem.style.zIndex = drop_count + 1;
            srcItem.style.top = parseInt(mouseNow.y - mouseOffset.y) + "px";
            srcItem.style.left = parseInt(mouseNow.x - mouseOffset.x) + "px";
        } else {//如果是遠方的客人，就新生成一個子元素在目標區
            //接收來自dragstart的座標訊息
            let mouseOffset = { x: 0, y: 0 };
            mouseOffset.x = e.dataTransfer.getData("offsetx");
            mouseOffset.y = e.dataTransfer.getData("offsety");
            //因為使用穿透屬性，所以座標定位不用迴避圖片了
            mouseNow = { x: 0, y: 0 };
            mouseNow.x = e.offsetX;
            mouseNow.y = e.offsetY;
            //創造新元素
            var img = document.createElement('img');
            img.src = e.dataTransfer.getData('image/jpeg');
            img.style.width = '50px';
            img.style.position = "absolute";
            img.style.top = parseInt(mouseNow.y - mouseOffset.y) + "px";
            img.style.left = parseInt(mouseNow.x - mouseOffset.x) + "px";
            img.classList.add("droped_img");
            img.style.zIndex = drop_count;
            img.id = "a" + drop_count;
            // img.style.pointerEvents = "none"; //可以被穿透，讓後面的圖可以順利覆蓋
            img.style.transform = "translateX(0px) translateY(0px) rotate(0deg) scale(1)";
            console.log(`e.target.classList: ${e.target.classList}`);
            arrDropedImg.push(img);//做一個陣列把動態添加元素的資料先存起來，之後統一操作
            // console.log(`arrDropedImg[]: ${arrDropedImg}`);
            // console.log(`arrDropedImg.length: ${arrDropedImg.length}`);
            this.appendChild(img);
            //恢復透明度
            e.target.style.opacity = "1";
        }
    }


    //dropedImgCtrl
    function dropedCtrl(e) {
        switch (this.id) {
            case "btn_big":
                arrDropedImg.forEach(el => {
                    if (el.classList.contains("select")) {
                        console.log("to be bigger");
                        let arr = el.style.transform.split(" ");
                        //有小數點時記得使用parseFloat保留小數點!!!用parseInt會砍掉小數點!!
                        let newScale = parseFloat(arr[3].replace("scale(", "").replace(")", "")) + 0.5;
                        console.log("arr: " + arr);
                        console.log("arr[3]: " + arr[3]);
                        console.log(parseFloat(arr[3].replace("scale(", "").replace(")", "")));
                        console.log("newScale: " + newScale);
                        arr[3] = "scale(" + newScale + ")";
                        el.style.transform = `${arr[0]} ${arr[1]} ${arr[2]} ${arr[3]}`;
                    }
                })
                break;
            case "btn_small":
                arrDropedImg.forEach(el => {
                    if (el.classList.contains("select")) {
                        console.log("to be smaller");
                        let arr = el.style.transform.split(" ");
                        //有小數點時記得使用parseFloat保留小數點!!!用parseInt會砍掉小數點!!
                        let newScale = parseFloat(arr[3].replace("scale(", "").replace(")", "")) - 0.5;
                        if (newScale < 0.1) newScale = 0.1;
                        console.log("arr: " + arr);
                        console.log("arr[3]: " + arr[3]);
                        console.log(parseFloat(arr[3].replace("scale(", "").replace(")", "")));
                        console.log("newScale: " + newScale);
                        arr[3] = "scale(" + newScale + ")";
                        el.style.transform = `${arr[0]} ${arr[1]} ${arr[2]} ${arr[3]}`;
                    }
                })
                break;
            case "btn_clk":
                arrDropedImg.forEach(el => {
                    if (el.classList.contains("select")) {
                        console.log("clk rotate");
                        let arr = el.style.transform.split(" ");
                        //有小數點時記得使用parseFloat保留小數點!!!用parseInt會砍掉小數點!!
                        let newAngel = parseInt(arr[2].replace("rotate(", "").replace("deg)", "")) + 20;
                        console.log("arr: " + arr);
                        console.log("arr[3]: " + arr[2]);
                        console.log(parseInt(arr[2].replace("rotate(", "").replace("deg)", "")));
                        console.log("newAngel: " + newAngel);
                        arr[2] = "rotate(" + newAngel + "deg)";
                        el.style.transform = `${arr[0]} ${arr[1]} ${arr[2]} ${arr[3]}`;
                    }
                })
                break;
            case "btn_unclk":
                arrDropedImg.forEach(el => {
                    if (el.classList.contains("select")) {
                        console.log("unclk rotate");
                        let arr = el.style.transform.split(" ");
                        //有小數點時記得使用parseFloat保留小數點!!!用parseInt會砍掉小數點!!
                        let newAngel = parseInt(arr[2].replace("rotate(", "").replace("deg)", "")) - 20;
                        console.log("arr: " + arr);
                        console.log("arr[2]: " + arr[2]);
                        console.log(parseInt(arr[2].replace("rotate(", "").replace("deg)", "")));
                        console.log("newAngel: " + newAngel);
                        arr[2] = "rotate(" + newAngel + "deg)";
                        el.style.transform = `${arr[0]} ${arr[1]} ${arr[2]} ${arr[3]}`;
                    }
                })
                break;
            case "btn_del":
                arrDropedImg.forEach(el => {
                    if (el.classList.contains("select")) {
                        // el.parent
                        console.log("刪除前 " + arrDropedImg);
                        console.log(`el.parent: ${el.parentNode}`);
                        el.parentNode.removeChild(el);
                        console.log("刪除後 " + arrDropedImg);
                        //陣列內東西還在，但html確實移除該元素
                    } else { }//沒事，不想讓瀏覽器跳錯誤而已
                })
                break;
        }
    }


    //轉轉箱子功能鈕
    //缺陷:style.transform是抓 css inline style的值，所以必須給箱子inline style的初始值 
    function boxRotate(e) {
        console.log(`this.id: ${this.id}`);
        switch (this.id) {
            case "btn_front":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(0deg) rotateY(0deg) rotateZ(0deg)";
                });
                break;
            case "btn_back":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(0deg) rotateY(180deg) rotateZ(0deg)";
                });
                break;
            case "btn_top":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(-90deg) rotateY(0deg) rotateZ(0deg)";
                });
                break;
            case "btn_bottom":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(90deg) rotateY(0deg) rotateZ(0deg)";
                });
                break;
            case "btn_left":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(0deg) rotateY(90deg) rotateZ(0deg)";
                });
                break;
            case "btn_right":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(0deg) rotateY(-90deg) rotateZ(0deg)";
                });
                break;
            case "rotateX":
                boxBases.forEach(element => {
                    // element.style.transform = "rotateX(0deg) rotateY(-90deg) rotateZ(0deg)";
                    console.log("element.style.transform:" + element.style.transform);
                    let arr = element.style.transform.split(" ");
                    console.log(`arr: ${arr}`);
                    let newAngelX = parseInt(arr[0].replace("rotateX(", "").replace("deg)", "")) + 10;
                    arr[0] = "rotateX(" + newAngelX + "deg)";
                    console.log(arr[0]);
                    element.style.transform = `${arr[0]} ${arr[1]} ${arr[2]}`;
                });
                break;
            case "rotateY":
                boxBases.forEach(element => {
                    // element.style.transform = "rotateX(0deg) rotateY(-90deg) rotateZ(0deg)";
                    console.log("element.style.transform:" + element.style.transform);
                    let arr = element.style.transform.split(" ");
                    console.log(`arr: ${arr}`);
                    let newAngelY = parseInt(arr[1].replace("rotateY(", "").replace("deg)", "")) + 10;
                    arr[1] = "rotateY(" + newAngelY + "deg)";
                    console.log(arr[1]);
                    element.style.transform = `${arr[0]} ${arr[1]} ${arr[2]}`;
                });
                break;
            case "rotateZ":
                boxBases.forEach(element => {
                    // element.style.transform = "rotateX(0deg) rotateY(-90deg) rotateZ(0deg)";
                    console.log("element.style.transform:" + element.style.transform);
                    let arr = element.style.transform.split(" ");
                    console.log(`arr: ${arr}`);
                    let newAngelZ = parseInt(arr[2].replace("rotateZ(", "").replace("deg)", "")) + 10;
                    arr[2] = "rotateZ(" + newAngelZ + "deg)";
                    console.log(arr[2]);
                    element.style.transform = `${arr[0]} ${arr[1]} ${arr[2]}`;
                });
                break;
            case "show":
                boxBases.forEach(element => {
                    element.style.transform = "rotateX(270deg) rotateY(180deg) rotateZ(0deg)";
                });
                
                break;
        }
    };

</script>
<script>

        $('.form').find('input, textarea').on('keyup blur focus', function (e) {
        
        var $this = $(this),
            label = $this.prev('label');
      
            if (e.type === 'keyup') {
                  if ($this.val() === '') {
                label.removeClass('active highlight');
              } else {
                label.addClass('active highlight');
              }
          } else if (e.type === 'blur') {
              if( $this.val() === '' ) {
                  label.removeClass('active highlight'); 
                  } else {
                  label.removeClass('highlight');   
                  }   
          } else if (e.type === 'focus') {
            
            if( $this.val() === '' ) {
                  label.removeClass('highlight'); 
                  } 
            else if( $this.val() !== '' ) {
                  label.addClass('highlight');
                  }
          }
      
      });
      
      $('.tab a').on('click', function (e) {
        
        e.preventDefault();
        
        $(this).parent().addClass('active');
        $(this).parent().siblings().removeClass('active');
        
        target = $(this).attr('href');
      
        $('.tab-content > div').not(target).hide();
        
        $(target).fadeIn(600);
        
      });
      </script>
</body>
</html>